<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Olli - Single Product Landing Page</title>

		<meta name="Keywords" content="">
		<meta name="Description" content="">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">	

		<!-- Favicon for Desktop, iOS and android -->
		<link rel="apple-touch-icon" sizes="57x57" href="assets/images/favicons/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="assets/images/favicons/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="assets/images/favicons/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="assets/images/favicons/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="assets/images/favicons/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="assets/images/favicons/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="assets/images/favicons/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="assets/images/favicons/apple-touch-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicons/apple-touch-icon-180x180.png">
		<link rel="icon" type="image/png" href="assets/images/favicons/android-chrome-192x192.png" sizes="192x192">
		<link rel="icon" type="image/png" href="assets/images/favicons/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="assets/images/favicons/favicon-16x16.png" sizes="16x16">
		<link rel="mask-icon" href="assets/images/favicons/safari-pinned-tab.svg">

		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

		<link href="/assets/css/bootstrap.css" rel="stylesheet"> 
		<link href="/assets/css/font-awesome.css" rel="stylesheet">
		<link href="/assets/css/pe-icon-7-stroke.css" rel="stylesheet">
		<link href="/assets/css/magnific-popup.css" rel="stylesheet">
		<link href="/assets/css/aos.css" rel="stylesheet">
		<link href="/assets/css/flexslider.css" rel="stylesheet">
		<link href="/assets/css/style.css" rel="stylesheet">
		<link href="/assets/css/colors/color-1.css" rel="stylesheet"> <!-- Color Scheme -->
		
		<!-- xeicon -->
		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css">
 		
		<script src="/assets/js/modernizr.js"></script>
		<script src="/assets/js/vue.js"></script>
		<!--[if lt IE 9]>
		<script src="assets/js/html5shiv.js"></script>
		<script src="assets/js/respond.min.js"></script> 
		<![endif]-->

	</head>

<body>
	<div id="app">
	<!-- Start Content -->
	<section id="buy" class="wrapper">

		<!-- Start Header -->
		<header id="" class="page-header-container">
			<div class="container-fluid page-header-content">
				<div class="page-overlay"></div>
				<h2>구매 하기</h2>
			</div>
		</header>
		<!-- End Header -->

		<!-- Start Navigation -->
		<nav id="navigation" class="navbar navbar-default navbar-page-top">
			<div class="container-fluid">

				<div class="container">

					<div class="navbar-button">
						<ul class="ul-btn">
							<li v-if="checkLogin()"><a v-on:click="logout()" class="button action-button-nav smooth" title="로그아웃">로그아웃</a></li>
							<li v-else><a v-on:click="popupLogin()" class="button action-button-nav smooth" title="로그인">로그인</a></li>
						</ul>
					</div>

					<div class="navbar-header">
						<button id="nav-icon" type="button" class="navbar-toggle collapsed nav-icon" data-toggle="collapse" data-target="#menu-navbar" aria-expanded="false">
								<span></span>
								<span></span>
								<span></span>
								<span></span>
						</button>
						<a class="navbar-brand smooth" href="index-1.html">Olli.<span class="logo-promo-text">Perfect Gadgets</span></a> <!-- Title / Tagline -->
					</div>

					<div class="collapse navbar-collapse" id="menu-navbar">
						<ul class="nav navbar-nav navbar-right smooth-nav">
							<li><a href="#home" title="Home">Home</a></li>
							<li><a href="#about" title="About">Technologies</a></li>
							<li><a href="#design" title="Design">Design</a></li>
							<li><a href="#service-1" title="Service">Service</a></li>
							<li><a href="#products-1" title="Products">Products</a></li>
							<li class="current"><a href="#buy" title="Buy now">Buy now</a></li>
							<li><a href="/cart" title="결제 내역">결제 내역</a></li>
							<li><a href="/contact" title="고객 센터">고객 센터</a></li>
						</ul>
					</div>

					<div class="clearfix"></div>

				</div>
			</div>
		</nav>
		<!-- End Navigation -->

		<!-- Start Content -->
		<!-- Start Products  -->
		<section id="products-1" class="products-l2 block gray">
			<div class="container">
				<div class="row">
					<!-- Start Product 1 -->
					<div id="product-l2-1" class="col-md-6 col product-l2">

						<div class="product-l2-block">

							<div class="product-l2-bg">
								<div class="bg-img"></div>
								<div class="bg-content"></div>
							</div>

							<!-- Start Product Images -->
							<div class="product-l2-img">
								<div class="product-l2-container">
									<img src="http://via.placeholder.com/196x225" alt="product">
								</div>
							</div>
							<!-- End Product Images -->

							<!-- Start Product Content -->
							<div class="product-l2-content">
								<div class="product-info">

									<h3>AIR PURI 청정기</h3>
									<p class="version">차량용</p>
									<span class="sale">400,000원</span> <span class="sale-price">300,000원</span>

									<p class="desc">Air puri 차량용 청정기 적어줄 말을 써주세요</p>
									<div class="order" style="padding-top:0px;padding-bottom:0px;">
										<div class="order-form-content">
										<div class="col-md-6">
											<div class="l2-bnt-block">
												<select class="order-country" v-on:change="onChange"  style="margin-top:0px;">
													<option v-for="option in car_option" v-bind:value="option.value">{{ option.text }}</option>
												</select>
											</div>
											</div>
										</div>									
									</div>
								</div>
							</div>
							<!-- End Product Content -->

						</div><!-- .product-l2-block -->
					</div>
					<!-- End Product 1 -->

					<!-- Start Product 2 -->
					<div id="product-l2-2" class="col-md-6 product-l2">

						<div class="product-l2-block">

							<div class="product-l2-bg">
								<div class="bg-img"></div>
								<div class="bg-content"></div>
							</div>

							<!-- Start Product Images -->
							<div class="product-l2-img">
								<div class="product-l2-container">
									<img src="http://via.placeholder.com/196x225" alt="product">
								</div>
							</div>
							<!-- End Product Images -->

							<!-- Start Product Content -->
							<div class="product-l2-content">
								<div class="product-info">

									<h3>AIR PURI 청정기</h3>
									<p class="version">실내용</p>
									<span>400,000원</span>
									<span class="sale-price">100000원</span>

									<p class="desc">Air puri  청정기 적어줄 말을 써 주세요</p>

									<div class="l2-bnt-block">
										<a  class="button buy-button"  title="Buy Now">comming soon</a>
									</div>

								</div>
							</div>
							<!-- End Product Content -->

						</div><!-- .product-l2-block -->
					</div>
					<!-- End Product 2 -->
				</div>
				<br />
				<div class="row">
					<div class="col-md-6"></div>
					<div class="col-md-6">
						<h3 class="text-right">총 결제 금액</h2>
						<h2 class="text-right">{{ totalPrice }} 원<small>(vat 포함)</small></h3>
						<div class="l2-bnt-block text-right">
							<a class="button buy-button"  title="구매 하기" v-on:click="showModal()">구매 하기</a>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- End Products / Layout 3 -->
		<!-- End Content -->

		<!-- Start Footer -->
		<footer id="footer" class="footer">

			<div class="footer-bg">
				<div class="footer-bg-img"></div>
				<div class="footer-bg-overlay"></div>
				<span class="trapeze-footer-bg"></span>
			</div>

			<div class="container footer-first-line">
				<div class="row">

					<!-- Start Text in Footer -->
					<div class="col-md-6 footer-about">

						<h2>Olli.</h2>
						<p>
							Nobis est eligendi optio, cumque nihil molestiae. Ea voluptate velit aliquid ex ea voluptate velit voluptatem accusantium doloremque laudantium esse, quam nihil impedit, quo minus id, quod maxime.
						</p>

						<ul class="footer-social-icons">
							<li><a href="#" title="Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i></a></li>
							<li><a href="#" title="Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i></a></li>
							<li><a href="#" title="Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i></a></li>
							<li><a href="#" title="Instagram"><i class="fa fa-fw fa-instagram" aria-hidden="true"></i></a></li>
							<li><a href="#" title="Behance"><i class="fa fa-fw fa-behance" aria-hidden="true"></i></a></li>
							<li><a href="#" title="Dribbble"><i class="fa fa-fw fa-dribbble" aria-hidden="true"></i></a></li>
							<li><a href="#" title="Linkedin"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i></a></li>
						</ul>

					</div>
					<!-- End Text in Footer -->

					<!-- Start Contacts -->
					<div class="col-md-6 footer-contacts">

						<h2><span class="text-notice">Get In Touch</span></h2>

						<p>If you have any questions or suggestions, please contact us, or you can come to visit us in our cozy office.</p>

						<ul>
							<li><strong>Phone:</strong> (+11) 123-555-4567</li>
							<li><strong>Email:</strong> mail@example.com</li>
							<li><strong>Address:</strong> 1465 Mountain St, CA 91104, USA</li>
						</ul>

					</div>
					<!-- End Contacts -->

				</div>
			</div> <!-- .footer-first-line -->

			<div class="container footer-second-line">
				<div class="row">

					<div class="col-md-6 footer-bottom-links">
						<ul>
							<li><a href="single-page.html" title="Privacy">Privacy</a> /</li>
							<li><a href="single-page.html" title="Terms of Use">Terms of Use</a> /</li>
							<li><a href="single-page.html" title="Security">Security</a></li>
						</ul>
						<p class="copyright">Olli - Single Product Landing Page. All rights reserved.</p>
					</div>

				</div>
			</div><!-- .footer-second-line -->
		</footer>
		<!-- End Footer -->

	</section>
	<!-- End Content -->
	<!-- Start Popup -->
	<section id="order" class="order mfp-hide">

		<div class="order-form-bg"></div>

		<!-- Start Form Header -->
		<div class="order-form-header clearfix">
			<div class="order-img">
			</div>
			<div class="order-desc">
				<h2>최종 결제 금액</h2>
				<p class="version">적을 내용을 입력해주세요</p>
				<span>{{ totalPrice }} 원</span>
				<p>적을 내용을 입력해주세요</p>
			</div>
		</div>
		<!-- End Form Header -->

		<div class="order-form-content">

			<!-- Start Order Form -->
			<form id="order-form" class="order-form">

				<div class="col-md-12">
					<h3>결제 정보 입력</h3>
				</div>

				<div class="col-md-6">
					<input v-model="order_name" class="order-f-name" type="text" name="order-f-name" placeholder="주문자 이름">
				</div>

				<div class="col-md-6">
					<input v-model="order_phone" class="order-l-name" type="text" name="order-l-name" placeholder="주문자 핸드폰(- 제외)">
				</div>
					
				<div class="col-md-12">
					<input v-model="order_email" class="order-email" type="text" name="order-email" placeholder="이메일(주문 내역 확인 시 필요합니다.)">
				</div>
				<div class="col-md-6">
					<input v-model="receiver_name" class="order-f-name" type="text" name="order-f-name" placeholder="수령인 이름">
				</div>

				<div class="col-md-6">
					<input v-model="receiver_phone" class="order-l-name" type="text" name="order-l-name" placeholder="수령인 핸드폰(- 제외)">
				</div>

				<div class="col-md-6">
					<input v-model="post_code" class="order-address" type="text" name="order-address" placeholder="우편번호" disabled>
				</div>

				<div class="col-md-6 order-button-block">
					<button type="button" class="button order-button" v-on:click="showPostCode()" title="Order">우편번호 찾기</button>
				</div>

				<div class="col-md-12">
					<input v-model="normal_address" class="order-state" type="text" name="order-state" placeholder="기본 주소" disabled>
				</div>
				
				<div class="col-md-12">
					<input v-model="addtional_address" class="order-state" type="text" name="order-state" placeholder="상세 주소">
				</div>
				<div id="layer" style="display:none;position:fixed;overflow:hidden;z-index:1;-webkit-overflow-scrolling:touch;">
					<img src="//t1.daumcdn.net/localimg/localimages/07/postcode/320/close.png" id="btnCloseLayer" style="cursor:pointer;position:absolute;right:-3px;top:-3px;z-index:1" onclick="closeDaumPostcode()" alt="닫기 버튼">
			  	</div>
				<div class="col-md-12">
					<input v-model="request" class="order-state" type="text" name="order-state" placeholder="배송 요청 사항">
				</div>
				<div v-if="!checkLogin()" class="col-md-12">
					<input v-model="anony_pw" class="order-state" type="password" name="order-state" placeholder="비회원 주문 비밀번호">
				</div>
				<div class="col-md-6">
					<div class="l2-bnt-block">
						<select class="order-country" v-model="pay_method">
							<option value="card">카드 결제</option>
							<option value="trans">실시간 계좌 이체</option>
						</select>
					</div>
				</div>
				<div class="col-md-12 order-button-block">
					<button v-on:click="buy_req()" type="button" class="button order-button" title="Order">Order Now</button>
				</div>

			</form>
			<!-- End Order Form -->

		</div> <!-- .order-form-content -->

	</section>
	<!-- End Popup -->
	<!-- Start Popup -->
	<section id="login" class="order mfp-hide">

		<div class="order-form-content">

			<!-- Start Order Form -->
			<div class="order-form">
				<div class="col-md-12">
					<h3>로그인</h3>
				</div>
				<div class="col-md-12">
					<input v-model="loginEmailInput" class="order-email" type="text" name="email" placeholder="Email">
				</div>

				<div class="col-md-12">
					<input class="order-address" v-model="loginPwInput" type="password" name="order-address" placeholder="Password">
				</div>
				<div class="col-md-12 order-button-block">
					<button v-on:click="login()" type="button" class="button order-button" style="width:100%;" title="Order">이메일 로그인</button>
				</div>
				<div class="col-md-12 order-button-block">
					<button type="button" v-on:click="kakaoLogin" class="button order-button" style="width:100%; background-color:#fef01b; border-color:#fef01b; color:#556677; " title="Order"><i class="xi-kakaotalk xi-x" style="padding-right:3px; "></i>카카오톡 로그인<div class="ld ld-ring ld-spin-fast"></div></button>
				</div>
				<div class="col-md-12 order-button-block">
					<button type="button" v-on:click="facebookLogin" class="button order-button" style="width:100%; background-color:#3b5998; border-color:#3b5998;" title="Order"><i class="xi-facebook-official xi-x" style="padding-right:3px; "></i>페이스북 로그인<div class="ld ld-ring ld-spin-fast"></div></button>
				</div>
				<div class="col-md-12 order-button-block">
					<button type="button" v-on:click="naverLogin" class="button order-button" style="width:100%; background-color:#1EC800; border-color:#1EC800;" title="Order"><i class="xi-naver-square xi-x" style="padding-right:3px; "></i>네이버 로그인<div class="ld ld-ring ld-spin-fast"></div></button>
				</div>
				<div class="col-md-12" style="display:none">
					<div id="naver_id_login"></div>
				</div>
				<div class="col-md-12">
					<label>{{ loginMessage }}</label>
				</div>
				<div class="col-md-12">
					<hr>
				</div>
				<div class="col-md-12">
					<p class="text-left">로그인 시 <a href="/service">서비스 약관</a> 및 <a href="/individual">개인 정보 보호정책</a>약관에 동의하는 것으로 간주됩니다.</p>
				</div>
				<div class="col-md-12">
					<a v-on:click="popupSignup($event)" style="padding-right:10px;">회원 가입</a>
					<a v-on:click="findPw($event)">비밀번호 찾기</a>
				</div>
			</div>
			<!-- End Order Form -->

		</div> <!-- .order-form-content -->

	</section>
	<!-- End Popup -->
	<!-- Start Popup -->
	<section id="signup" class="order mfp-hide">

		<div class="order-form-content">

			<!-- Start Order Form -->
			<div class="order-form">
				<div class="col-md-12">
					<h3>회원 가입</h3>
				</div>
				<div class="col-md-12">
					<input class="order-email" v-model="signUpEmailInput" type="text" name="email" placeholder="이메일">
				</div>
				<div class="col-md-12">
					<input class="order-address" v-model="signUpPwInput" type="password" placeholder="비밀번호">
				</div>
				<div class="col-md-12">
					<input class="order-address" v-model="signUpPwConfirmInput" type="password" placeholder="비밀번호 확인">
				</div>
				<div class="col-md-12">
					<input  class="order-email" v-model="signUpNicknameInput" type="text"  placeholder="닉네임">
				</div>
				<div class="col-md-12">
					<label>{{ signUpMessage }}</label>
				</div>
				<div class="col-md-12">
					<hr>
				</div>
				<div class="col-md-12">
					<p>회원가입 시 <a href="/service">서비스 약관</a> 및 <a href="/individual">개인 정보 보호정책</a>약관에 동의하는 것으로 간주됩니다.</p>
				</div>
				<div class="col-md-6">
					<button type="button" style="width:100%; margin-top:10px;" class="button action-button-cta" v-on:click="signUp">가입하기</button>
				</div>
				<div class="col-md-6">
					<button type="button" v-on:click="closePopup" style="width:100%; margin-top:10px;" class="button">돌아가기</button>
				</div>
			</div>
			<!-- End Order Form -->

		</div> <!-- .order-form-content -->

	</section>
	<!-- End Popup -->
	<!-- Start Popup -->
	<section id="pwEmail" class="order mfp-hide">

		<div class="order-form-content">

			<!-- Start Order Form -->
			<div class="order-form">
				<div class="col-md-12">
					<h3>비밀번호 찾기</h3>
				</div>
				<div class="col-md-12">
					<input class="order-email" type="text" name="email" v-model="findEmail" placeholder="회원가입 한 이메일을 입력해 주세요">
				</div>
				<div class="col-md-12">
					<label>{{ findPWMessage }}</label>
				</div>
				<div class="col-md-12">
					<hr>
				</div>
				<div class="col-md-6">
					<button type="button" style="width:100%; margin-top:10px;" v-on:click="sendEmail" class="button action-button-cta" >비밀번호 찾기</button>
				</div>
			</div>
			<!-- End Order Form -->

		</div> <!-- .order-form-content -->

	</section>
	<!-- End Popup -->
</div>
<!-- Include JS -->
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/device.min.js"></script>
<script src="/assets/js/retina.min.js"></script>
<script src="/assets/js/nav.js"></script>
<script src="/assets/js/smooth-scroll.min.js"></script>
<script src="/assets/js/parallax.js"></script>
<script src="/assets/js/aos.js"></script>
<script src="/assets/js/flexslider.js"></script>
<script src="/assets/js/youtubebackground.js"></script>
<script src="/assets/js/magnific-popup.min.js"></script>
<script src="/assets/js/init.js"></script>
<!-- firebase script -->
<script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
<!-- 카카오톡 로그인 API -->
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<!-- 네이버 로그인 API -->
<script type="text/javascript" src="https://static.nid.naver.com/js/naverLogin_implicit-1.0.3.js" charset="utf-8"></script>
<!-- iamport.payment.js -->
<script type="text/javascript" src="https://service.iamport.kr/js/iamport.payment-1.1.5.js"></script>
<!-- 우편번호 스크립트 -->
<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>
<script>
  // Initialize Firebase
  // TODO: Replace with your project's customized code snippet
  var config = {
    apiKey: "AIzaSyALyWz06WQtK1rn3rGsTHHbiFmv9hAJTHM",
    authDomain: "airpuri-1c6b7.firebaseapp.com",
    projectId: "airpuri-1c6b7"
  };
  firebase.initializeApp(config);
  var naver_id_login = new naver_id_login("V6wZ56EY5aj3huwFWJCw",	"http://www.lottofreenum.com/auth");
  var state = naver_id_login.getUniqState();
	 	naver_id_login.setButton("white", 2,40);
	 	naver_id_login.setDomain("http://www.lottofreenum.com");
	 	naver_id_login.setState(state);
	 	naver_id_login.setPopup();
	 	naver_id_login.init_naver_id_login();
	 	function naverIdLoginCallback(result){
	 		if(result=='success'){
	 			$.magnificPopup.close();
	 		} else if(result=='duplicate'){
	 			alert('이미 다른 서비스로 이용중인 이메일 입니다.');
	 		} else{
	 			alert('로그인에 실패 했습니다. 다시 시도해 주세요.');
	 		}
	 	}
		
	    function closeDaumPostcode() {
	        // iframe을 넣은 element를 안보이게 한다.
	        document.getElementById('layer').style.display = 'none';
	    }
	    var IMP = window.IMP; // 생략해도 괜찮습니다.
	    IMP.init("imp33553431"); // "imp00000000" 대신 발급받은 "가맹점 식별코드"를 사용합니다.
</script>
<!-- vue.js 부분 -->
<script type="text/javascript">
new Vue({
	el:'#app',
	data:{
		user:null,
		token:'',
		loginEmailInput:'',
		loginPwInput:'',
		signUpEmailInput:'',
		signUpPwInput:'',
		signUpPwConfirmInput:'',
		signUpNicknameInput:'',
		signUpMessage:'',
		loginMessage:'',
		findPWMessage :'',
		findEmail:'',
		totalPrice:30000,
		carPrice:30000,
		indoor:0,
		order_name:'',
		order_phone:'',
		order_email:'',
		receiver_name:'',
		receiver_phone:'',
		post_code:'',
		normal_address:'',
		addtional_address:'',
		request:'',
		anony_pw:'',
		pay_method:'card',
		car_option:[{text:1,value:30000},{text:2,value:60000},{text:3,value:90000},{text:4,value:120000},{text:5,value:150000}]
	},
	methods:{
		onChange: function (event){
			this.carPrice = event.srcElement.value;
			this.totalPrice = this.carPrice;
		},
		buy_req:function(){
			var regPhone = /^(01[016789]{1})([0-9]{3,4})([0-9]{4})$/;
			var emailRegExp = /([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
			var send_name=this.order_name.trim();
			var send_phone = this.order_phone.trim();
			var email = this.order_email.trim();
			var receive_name = this.receiver_name.trim();
			var receive_phone = this.receiver_phone.trim();
			var receive_postcode = this.post_code.trim();
			var receive_normal_addr = this.normal_address.trim();
			var receive_detail_addr = this.addtional_address.trim();
			var request = this.request;
			var pw = this.anony_pw.trim();
			var pay_method = this.pay_method;
			var total_price = this.totalPrice;
			var car_price = this.carPrice;
			var user_token = this.token;
			if(send_name==''){
				alert("주문자 이름을 입력해 주세요");
				return false;
			} else if(send_phone==''){
				alert("주문자 핸드폰번호를 입력해 주세요");				
				return false;
			} else if(!regPhone.test(send_phone)){
				alert("핸드폰번호는 - 를 제외해서 올바르게 입력해 주세요");
				return false;
			} else if(!emailRegExp.test(email)){
				alert("이메일 번호를 올바르게 입력해 주세요");
			}else if(receive_name==''){
				alert("받으시는 분을 입력해 주세요");
				return false;
			}else if(receive_phone==''){
				alert("배송지 핸드폰번호를 입력해 주세요");
				return false;
			} else if(!regPhone.test(receive_phone)){
				alert("핸드폰번호는 - 를 제외해서 올바르게 입력해 주세요");
				return false;
			} else if(receive_postcode ==''){
				alert("배송지 주소를 입력해 주세요");
				return false;
			}else if(receive_normal_addr ==''){
				alert("배송지 주소를 입력해 주세요");
				return false;
			} else if(receive_detail_addr ==''){
				alert("배송지 주소를 입력해 주세요");
				return false;
			} else if(!((this.checkLogin())||((pw.length>3)&&(pw.length<21)))){
				alert("비밀번호는 4자리 이상 20자리 이하로 해주세요")
			}else {
				var merchant_uid = 'merchant_' + new Date().getTime();
				var escrow = true;
				if(pay_method=='card'){
					escrow =false;
				}
				 IMP.request_pay({ // param
		                pg: "inicis",
		                pay_method: pay_method,
		                merchant_uid: merchant_uid,
		                name: "Air Puri 차량용 청정기",
		                amount: 1000,//total_price,
		                escrow:escrow,
		                buyer_email: email,
		                buyer_name: receive_name,
		                buyer_tel: receive_phone,
		                buyer_addr: receive_normal_addr+' '+receive_detail_addr,
		                buyer_postcode: receive_postcode,
		                custom_data	: {
		                	token : user_token,
					    	request : request,
							receiver_phone : receive_phone,
			    			receiver_name : receive_name,
			    			car_price : car_price,
			    			pw : pw 
		                },
		                m_redirect_url:'http://www.lottofreenum.com/pay-success?amount='+1000
		            }, (rsp) => { // callback
		                if (rsp.success) {
		              		location.replace("/pay-success?amount="+1000+'&imp_uid='+rsp.imp_uid+'&imp_success='+rsp.success); //나중에 total_price로 바꿀껏
		                } else {
		                	alert("결제가 취소되었습니다.");
		                }
		            });
			}
		},
		showPostCode:function(){
				var vm = this;
			   var element_layer = document.getElementById('layer');
			    function sample2_execDaumPostcode() {
			        new daum.Postcode({
			            oncomplete: function(data) {
			                // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.
			
			                // 각 주소의 노출 규칙에 따라 주소를 조합한다.
			                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
			                var fullAddr = data.address; // 최종 주소 변수
			                var extraAddr = ''; // 조합형 주소 변수
			
			                // 기본 주소가 도로명 타입일때 조합한다.
			                if(data.addressType === 'R'){
			                    //법정동명이 있을 경우 추가한다.
			                    if(data.bname !== ''){
			                        extraAddr += data.bname;
			                    }
			                    // 건물명이 있을 경우 추가한다.
			                    if(data.buildingName !== ''){
			                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
			                    }
			                    // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다.
			                    fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : '');
			                }
			
			                // 우편번호와 주소 정보를 해당 필드에 넣는다.
			                vm.post_code = data.zonecode;
			                vm.normal_address=fullAddr;
			
			                // iframe을 넣은 element를 안보이게 한다.
			                // (autoClose:false 기능을 이용한다면, 아래 코드를 제거해야 화면에서 사라지지 않는다.)
			                element_layer.style.display = 'none';
			            },
			            width : '100%',
			            height : '100%',
			            maxSuggestItems : 5
			        }).embed(element_layer);
			
			        // iframe을 넣은 element를 보이게 한다.
			        element_layer.style.display = 'block';
			
			        // iframe을 넣은 element의 위치를 화면의 가운데로 이동시킨다.
			        initLayerPosition();
			    }
			
			    // 브라우저의 크기 변경에 따라 레이어를 가운데로 이동시키고자 하실때에는
			    // resize이벤트나, orientationchange이벤트를 이용하여 값이 변경될때마다 아래 함수를 실행 시켜 주시거나,
			    // 직접 element_layer의 top,left값을 수정해 주시면 됩니다.
			    function initLayerPosition(){
			    	var width = 500; //우편번호서비스가 들어갈 element의 width
			    	if((window.innerWidth || document.documentElement.clientWidth)<500){
			    		var width = 300; //우편번호서비스가 들어갈 element의 width	
			    	}
			        
			        var height = 500; //우편번호서비스가 들어갈 element의 height
			        var borderWidth = 2; //샘플에서 사용하는 border의 두께
			
			        // 위에서 선언한 값들을 실제 element에 넣는다.
			        element_layer.style.width = width + 'px';
			        element_layer.style.height = height + 'px';
			        element_layer.style.border = borderWidth + 'px solid';
			        // 실행되는 순간의 화면 너비와 높이 값을 가져와서 중앙에 뜰 수 있도록 위치를 계산한다.
			        element_layer.style.left = (((window.innerWidth || document.documentElement.clientWidth) - width)/2 - borderWidth) + 'px';
			        element_layer.style.top = ((((window.innerHeight || document.documentElement.clientHeight) - height)/2 - borderWidth)+80) + 'px';
			    }
			    sample2_execDaumPostcode();
		},
		showModal: function(){
			$.magnificPopup.open({
				items:{
					src:'#order'
				},
				type:'inline',
			    midClick: true,
			    removalDelay: 300,
			    mainClass: 'mfp-fade'
			});
		},
		checkLogin:function(){
			if(this.user==null){
				return false;
			} else{
				return true;
			}
		},
		facebookLogin:function(){
			const vm = this;
			var provider = new firebase.auth.FacebookAuthProvider();
			provider.setCustomParameters({
				  'display': 'popup'
			});
			firebase.auth().signInWithPopup(provider).then(function(result) {
				vm.user = result.user;
				$.magnificPopup.close();
			}).catch(function(error) {
    			if(error.code =='auth/account-exists-with-different-credential'){
    				vm.loginMessage='이미 다른 서비스로 이용중인 이메일 입니다.';
    			} else{
    				vm.loginMessage='로그인에 실패 했습니다. 다시 시도해 주세요';
    			}
			});
		},
		kakaoLogin:function(){
			const vm = this;
			Kakao.Auth.login({
		        success: function(authObj) {
		                $.post("/kakao_login" ,{access_token : authObj['access_token']} ,function(result){
		    				if(result['result']=='duplicate'){
		    					vm.loginMessage='이미 가입된 이메일 입니다.';
		    				}else {
		    					firebase.auth().signInWithCustomToken(result['token']).catch(function(error) {
		    						vm.loginMessage='내부 서버 오류입니다. 잠시후에 시도해 주세요';
		    						}).then(function(){
		    							$.magnificPopup.close();
		    						});
		    				}
		    			}).fail(function(message){
		    				if(!message){
		    					vm.loginMessage=message['message'];	
		    				} else{
		    					vm.loginMessage='내부 서버 오류입니다. 잠시후에 시도해 주세요';
		    				}
		    			});
		                Kakao.Auth.logout();
		        },
		        fail: function(err) {
		        	vm.loginMessage='이메일이나 비밀번호가 틀렸습니다.';
		        },
		        throughTalk: false
		      });
		},
		naverLogin:function(){
			$("#naver_id_login").find('a').click();
		},
		logout:function(){
			this.user = null;
			firebase.auth().signOut();
		},
		closePopup:function(){
			$.magnificPopup.close();
		},
		popupLogin:function(){
			const vm = this;
			$.magnificPopup.open({
				items:{
					src:'#login'
				},
				type:'inline',
			    midClick: true,
			    mainClass: 'mfp-fade',
			    callbacks:{
				    close: function(){
				    	vm.loginEmailInput='';
				    	vm.loginPwInput='';
				    	vm.loginMessage='';
				    }
			    }
			});
		},
		sendEmail:function(){
			const vm  = this;
			var emailRegExp = /([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
			var email = this.findEmail.trim();
			if(!emailRegExp.test(email)){
				this.findPWMessage = '올바른 이메일을 적어주세요';
			}else{
				firebase.auth().sendPasswordResetEmail(email).then(function() {
					$.magnificPopup.close();
					alert("비밀번호 찾게 메일이 발송되었습니다.")
					}).catch(function(error) {
						if(error.code='auth/user-not-found'){
							vm.findPWMessage = '해당 이메일로 가입한 회원이 없습니다.';							
						} else{
							vm.findPWMessage = '내부 서버 오류입니다 .잠시후에 시도해 주세요';
						}
					});
			}
		},
		findPw:function(e){
			const vm = this;
			$.magnificPopup.close();
			e.stopPropagation();  //이거 있어야 새창으로 리뉴얼 됨
			$.magnificPopup.open({
				items:{
					src:'#pwEmail'
				},
				type:'inline',
			    midClick: true,
			    mainClass: 'mfp-fade',
			    callbacks:{
			    	close:function(){
						vm.findEmail = '';
						findPWMessage='';
			    	}
			    }
			});
		},
		signUp:function(){
			const vm = this;
			var emailRegExp = /([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
			var passRegExp = /^(?=.*[a-zA-Z])((?=.*\d)|(?=.*\W)).{6,20}$/
			var email = this.signUpEmailInput.trim();
			var pw = this.signUpPwInput.trim();
			var pw_confirm = this.signUpPwConfirmInput.trim();
			var nickname = this.signUpNicknameInput.trim();
			if(!emailRegExp.test(email)){
				this.signUpMessage = '올바른 이메일을 적어주세요';
			} else if(!passRegExp.test(pw)){
				this.signUpMessage = '비밀번호는 숫자 혹은 특수 문자를 포함 영문자 6자리 이상으로 해주세요.';
			}else if(pw !== pw_confirm){
				this.signUpMessage = '비밀번호가 일치하지 않습니다.';
			} else if(nickname.length==0){
				this.signUpMessage = '사용할 닉네임을 입력해주세요!';
			} else if(nickname.length>20){
				this.signUpMessage = '닉네임은 20자 이하로 입력해주세요!';
			} else{
				$.post("/sign-up" ,{email:email , pw:pw, pw_confirm:pw_confirm , nickname:nickname} ,function(result){
					if(result['result']=='duplicate'){
						vm.signUpMessage = '이미 사용중인 email입니다. 다른 Email을 사용해 주세요';
					} else if(result['result']=='success'){
						firebase.auth().signInWithEmailAndPassword(email, pw).catch(function(error) {
							vm.signUpMessage = '내부 서버 오류입니다. 잠시후에 로그인 해주세요';
						});
					}
				}).fail(function(){
					this.signUpMessage = '내부 서버 오류입니다. 잠시후에 로그인 해주세요';
				});
			}
		},
		popupSignup:function(e){
			var vm = this;
			$.magnificPopup.close();
            e.stopPropagation();
			$.magnificPopup.open({
				items:{
					src:'#signup'
				},
				type:'inline',
			    midClick: true,
			    mainClass: 'mfp-fade',
			    closeOnBgClick:false,
			    callbacks:{
			    	close:function(){
			    		vm.signUpEmailInput='';
			    		vm.signUpPwInput='';
			    		vm.signUpPwConfirmInput='';
			    		vm.signUpNicknameInput='';
			    		vm.signUpMessage='';
			    	}
			    }
			});
		},
		login:function(){
			var vm = this;
			var email = this.loginEmailInput.trim();
			var pw = this.loginPwInput.trim();
			firebase.auth().signInWithEmailAndPassword(email, pw).then((user) => {
		        if (user) {
			     	this.user = user
			     	user.getIdToken(true).then(function(idToken){
			     		vm.token = idToken;
			     	});
			     	$.magnificPopup.close();
				}
			}).catch(function(error) {
				if(error.code='auth/wrong-password'){
					vm.loginMessage='이메일이나 비밀번호가 틀렸습니다.';
				}else{
					vm.loginMessage='내부 서버 오류입니다 잠시후에 사용해주세요';
				}
			});
		}
	},
	beforeCreate: function(){
		Kakao.init('8cfff2d2abaa58507a1576a56585356c');
		firebase.auth().onAuthStateChanged((user) => {
	        if (user) {
	          this.user = user;
	          this.order_name = user.displayName;
	          this.order_email = user.email;
	          var vm = this;
	          user.getIdToken(true).then(function(idToken){
		     		vm.token = idToken;
		     	});
	        } else{
	        	this.anony_pw='';
	        	this.token='';
	        }
	      });
		//여기다가 firebase init 넣어야함
		//dom 생성되기전에 실행되는 함수
	}
});

</script>

	<script>
	    // 우편번호 찾기 화면을 넣을 element
	 
	</script>
<!--[if lte IE 9]>
<script src="assets/js/placeholders.js"></script>
<script src="assets/js/init-for-ie.js"></script>
<![endif]-->

</body>
</html>